package com.chada.ems.service.impl;

import com.chada.ems.BaseTest;
import com.chada.ems.common.domain.traffic.PackageTypeEnum;
import com.chada.ems.service.TrafficPackageService;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;

/**
 * @author Hua Wang
 *         Created On: 2019/5/2 13:20
 */
public class TrafficPackageServiceImplTest extends BaseTest {
    @Autowired
    private TrafficPackageService trafficPackageService;

    @Test
    public void saveTrafficPackages() throws Exception {

        //仅关注 数据上传 和 设备状态上传 好了。

        // 上传污染物实时数据
        String a1 = "##0403QN=20190430100720484;ST=21;CN=2011;PW=624930;MN=A140100_2006;Flag=9;CP=&&DataTime=20190430100720;w01001-Rtd=8.44,w01001-Flag=N;w01009-Rtd=10.50,w01009-Flag=N;w01010-Rtd=13.96,w01010-Flag=N;w01003-Rtd=10.94,w01003-Flag=N;w01014-Rtd=728.42,w01014-Flag=N;w21003-Rtd=0.01,w21003-Flag=N;w21011-Rtd=0.01,w21011-Flag=N;w21001-Rtd=2.64,w21001-Flag=N;w01016-Rtd=1.73,w01016-Flag=N;w19011-Rtd=6.68,w19011-Flag=N&&8C41";
        String a2 = "##0197ST=32;CN=2051;QN=20190510002720495;PW=123456;MN=23040281003022;Flag=5;CP=&&DataTime=20190507211000;w01018-Max=27.299999,w01018-Avg=27.300000,w01018-Min=27.299999,w01018-Cou=0.000000,w01018-Flag=N&&D641\n" +
                "##0197ST=32;CN=2051;QN=20190510002720605;PW=123456;MN=23040281003022;Flag=5;CP=&&DataTime=20190507212000;w01018-Max=27.299999,w01018-Avg=27.300000,w01018-Min=27.299999,w01018-Cou=0.000000,w01018-Flag=N&&B681\n" +
                "##0197ST=32;CN=2051;QN=20190510002720729;PW=123456;MN=23040281003022;Flag=5;CP=&&DataTime=20190507213000;w01018-Max=27.299999,w01018-Avg=27.300000,w01018-Min=27.299999,w01018-Cou=0.000000,w01018-Flag=N&&6D40";
        String a3 = "##0198ST=32;CN=2011;QN=20190510002912706;PW=123456;MN=23040281003022;Flag=5;CP=&&DataTime=20190509041700;w01018-Rtd=27.300000,w01018-Flag=N,w01018-SampleTime=20190509041600,w01018-Alarm=3,w01018-State=1&&FB41";

        String b1 = "##0262QN=20190513133500949;ST=22;CN=2051;PW=000000;MN=100000000000000000000001;Flag=5;CP=&&DataTime=20190513133500;a01001-Avg=22.6;a01002-Avg=25.1;a01006-Avg=100.55;a01007-Avg=0;a01008-Rtd=51,a01008-Avg=51;a34004-Avg=3000;a34002-Avg=3000;a80002-Cou=0;a80003-Avg=175;&&5440";

        // 上传设备运行状态数据
        String c1 = "##0146QN=20160801085857223;ST=32;CN=2021;PW=123456;MN=010000A8900016F000169DC0;Flag=5;CP=&&DataTime=20160801085857;SB1-RS=1;SB2-RS=0;SB3-RT=1;SB4-RT=0&&FB42";

        // 上传噪声声级实时数据
        String d1 = "##0122QN=20160801085857223;ST=23;CN=2011;PW=123456;MN=010000A8900016F000169DC0;Flag=5;CP=&&DataTime=20160801085857;LA-Rtd=50.1&&FB44";
        // 上传噪声声级分钟数据
        String d2 = "##0221QN=20160801085000001;ST=23;CN=2051;PW=123456;MN=010000A8900016F000169DC0;Flag=5;CP=&&DataTime=20160801084000;L5-Data=53.0;L10-Data=53.0;L50-Data=49.0;L90-Data=45.0;L95-Data=43.0;Leq-Data=50.0;LMx-Data=54.0;LMn-Data=42.0&&FB45";
        // 上传噪声声级小时数据
        String d3 = "##0221QN=20160801090000001;ST=23;CN=2061;PW=123456;MN=010000A8900016F000169DC0;Flag=5;CP=&&DataTime=20160801080000;L5-Data=53.0;L10-Data=53.0;L50-Data=49.0;L90-Data=45.0;L95-Data=43.0;Leq-Data=50.0;LMx-Data=54.0;LMn-Data=42.0&&FB46";
        // 上传噪声声级日历史数据
        String d4 = "##0505QN=20160802000000001;ST=23;CN=2031;PW=123456;MN=010000A8900016F000169DC0;Flag=5;CP=&&DataTime=20160801000000;L5-Data=53.0;L10-Data=53.0;L50-Data=49.0;L90-Data=45.0;L95-Data=43.0;Ldn-Data=50.0;LMx-Data=54.0;LMn-Data=42.0;L5-DayData=53.0;L10-DayData=53.0;L50-DayData=52.0;L90-DayData=51.0;L95-DayData=50.0;Ld-DayData=52.5;LMx-DayData=54.0;LMn-DayData=45.0;L5-NightData=53.0;L10-NightData=53.0;L50-NightData=52.0;L90-NightData=51.0;L95-NightData=49.0;Ln-NightData=52.5;LMx-NightData=54.0;LMn-NightData=42.0&&FB47";

        // 上传工况实时数据
        String e1 = "##0140QN=20160801085857223;ST=52;CN=2011;PW=123456;MN=010000A8900016F000169DC0;Flag=5;CP=&&DataTime=20160801085857;e10101-Rtd=1.1;e10201-Rtd=2.2&&FB48";

        // 上传现场机信息（日志）
        String g1 = "##1703ST=32;CN=3020;QN=20190424002722330;PW=123456;MN=23040281003022;Flag=5;CP=&&DataTime=20190424002000;DT=0;PolId=w01018;i11001-Info=//R:4e 26 26 45 30 34 31 0d 0a 23 23 30 30 37 36 53 54 3d 33 32 3b 43 4e 3d 32 30 31 31 3b 50 57 3d 3b 4d 4e 3d 3b 43 50 3d 26 26 44 61 74 61 54 69 6d 65 3d 32 30 31 38 31 32 32 35 30 38 30 30 30 30 3b 30 31 31 2d 52 74 64 3d 32 37 2e 33 2c 30 31 31 2d 46 6c 61 67 3d 4e 26 26 37 33 34 30 0d 0a 23 23 30 30 37 36 53 54 3d 33 32 3b 43 4e 3d 38 30 31 33 3b 50 57 3d 3b 4d 4e 3d 3b 43 50 3d 26 26 44 61 74 61 54 69 6d 65 3d 32 30 31 38 31 32 32 35 30 38 30 30 30 30 3b 30 31 31 2d 52 74 64 3d 32 37 2e 33 2c 30 31 31 2d 46 6c 61 67 3d 4e 26 26 45 30 34 31 0d 0a 23 23 30 30 37 36 53 54 3d 33 32 3b 43 4e 3d 32 30 31 31 3b 50 57 3d 3b 4d 4e 3d 3b 43 50 3d 26 26 44 61 74 61 54 69 6d 65 3d 32 30 31 38 31 32 32 35 30 38 30 30 30 30 3b 30 31 31 2d 52 74 64 3d 32 37 2e 33 2c 30 31 31 2d 46 6c 61 67 3d 4e 26 26 37 33 34 30 0d 0a 23 23 30 30 37 36 53 54 3d 33 32 3b 43 4e 3d 38 30 31 33 3b 50 57 3d 3b 4d 4e 3d 3b 43 50 3d 26 26 44 61 74 61 54 69 6d 65 3d 32 30 31 38 31 32 32 35 30 38 30 30 30 30 3b 30 31 31 2d 52 74 64 3d 32 37 2e 33 2c 30 31 31 2d 46 6c 61 67 3d 4e 26 26 45 30 34 31 0d 0a 23 23 30 30 37 36 53 54 3d 33 32 3b 43 4e 3d 32 30 31 31 3b 50 57 3d 3b 4d 4e 3d 3b 43 50 3d 26 26 44 61 74 61 54 69 6d 65 3d 32 30 31 38 31 32 32 35 30 38 30 30 30 30 3b 30 31 31 2d 52 74 64 3d 32 37 2e 33 2c 30 31 31 2d 46 6c 61 67 3d 4e 26 26 37 33 34 30 0d 0a 23 23 30 30 37 36 53 54 3d 33 32 3b 43 4e 3d 38 30 31 33 3b 50 57 3d 3b 4d 4e 3d 3b 43 50 3d 26 26 44 61 74 61 54 69 6d 65 3d 32 30 31 38 31 32 32 35 30 38 30 30 30 30 3b 30 31 31 2d 52 74 64 3d 32 37 2e 33 2c 30 31 01 //&&3B80";
        // 上传现场机信息（参数）
        String g2 = "##0262QN=20190430101750562;ST=21;CN=3020;PW=624930;MN=A140100_2006;Flag=9;CP=&&DataTime=20190430101750;PolId=w01019,i12001-Info=0,i12002-Info=0;PolId=w21001,i12001-Info=0,i12002-Info=0;PolId=w21003,i12001-Info=0,i12002-Info=0;PolId=w21011,i12001-Info=0,i12002-Info=0&&FB41";

        String h1 = "##0176QN=20190513133600776;ST=25;CN=2051;PW=000003;MN=000000000000000000000003;Flag=5;CP=&&DataTime=20190513133600;t80001-Avg=1;t80011-Avg=2;t80002-Avg=3;t80012-Avg=4;t80021-Avg=5;&&5280";

        //其他格式不解析
        String z1 = "##0086QN=20190510002720483;ST=91;CN=9021;PW=123456;MN=23040281003022;Flag=5;CP=&&Data=807F&&6B80";
        String z2 = "##0099QN=20160801085857223;ST=32;CN=3011;PW=123456;MN=010000A8900016F000169DC0;Flag=5;CP=&&PolId=w01018&&FB49";

        trafficPackageService.saveTrafficPackages(c1, null, null, PackageTypeEnum.GENERIC_PACKAGE);
    }

}